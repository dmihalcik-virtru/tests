# Tiltfile for development of OpenTDF backend
# reference https://docs.tilt.dev/api.html
# extensions https://github.com/tilt-dev/tilt-extensions

load(
    "../opentdf.Tiltfile",
    "opentdf_cluster_with_ingress",
)

opentdf_cluster_with_ingress()

local_resource("test", "npm run test", resource_deps=["backend", "frontend"])

local_resource(
   "probe-abacus",
   serve_cmd="curl http://localhost:8080",
   readiness_probe=probe(
      period_secs=30,
      http_get=http_get_action(port=8080, path="/")
   )
)
